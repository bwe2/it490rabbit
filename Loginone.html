<!DOCTYPE html>
<html lang="en">
<head>
          <title>Login</title>
<link href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.0/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
	<link rel="stylesheet" type="text/css" href="styles.css">
<!------ Include the above in your HEAD tag ---------->
	
	</head>
	<b><center> Welcome!!! This is the Car Recall Form Page.</center>
	<body>


 <form action= "HandleRequests.php" method = "post">
<div class="container">
    	<div class="row">
		<div class="col-md-6 col-md-offset-3">
	<div class="panel panel-login">
	<div class="panel-heading">
			<div class="row">
			<div class="col-xs-6">
			<a href="#" class="active" id="login-form-link">Login</a>
			</div>
		<div class="col-xs-6">
		<a href="#" id="register-form-link" onclick="RegisterPage()">Register</a>
			</div>
		</div>
			<hr>
		</div>
	<div class="panel-body">
		<div class="row">
		<div class="col-lg-12">
		<form id="login-form" action="https://phpoll.com/login/process" method="post" role="form" style="display: block;">
		<div class="form-group">
	<input type="text" name="username" id="username" tabindex="1" class="form-control" placeholder="Username" value="">
		</div>
		<div class="form-group">
	<input type="password" name="password" id="password" tabindex="2" class="form-control" placeholder="Password">
		</div>
		<div class="form-group text-center">
	<input type="checkbox" tabindex="3" class="" name="remember" id="remember">
		<label for="remember"> Remember Me</label>
		</div>
		<div class="form-group">
		<div class="row">
		<div class="col-sm-6 col-sm-offset-3">
	<input type="submit" name="login-submit" id="login-submit" tabindex="4" class="form-control btn btn-login" value="Log In" onclick ="submitLogin()">
		</div>
	</div>
</div>
	<div class="form-group">
		<div class="row">
		<div class="col-lg-12">
		<div class="text-center">
	<a href="https://phpoll.com/recover" tabindex="5" class="forgot-password">Forgot Password?</a>
			</div>
		</div>
	</div>
	</div>
</form>
			</form>
	
			</div>
		</div>
		</div>
		</div>
		</div>
		</div>
	</div>
<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.0/js/bootstrap.min.js"></script>
<script src="//code.jquery.com/jquery-1.11.1.min.js"></script>
	<script type="text/javascript">
		$(function() {

    $('#login-form-link').click(function(e) {
		$("#login-form").delay(100).fadeIn(100);
 		$("#register-form").fadeOut(100);
		$('#register-form-link').removeClass('active');
		$(this).addClass('active');
		e.preventDefault();
	});
	$('#register-form-link').click(function(e) {
		$("#register-form").delay(100).fadeIn(100);
 		$("#login-form").fadeOut(100);
		$('#login-form-link').removeClass('active');
		$(this).addClass('active');
		e.preventDefault();
	});

});
function submitLogin()
{
	var uname = document.getElementById("username").value;
	var pword = document.getElementById("password").value;
	 var message = "type=login&user=" + uname + "&pass=" + pword;
	sendLoginRequest(message);
	//return 0;
	
}
function sendLoginRequest(message)
{
	var request = new XMLHttpRequest();
	request.open("POST","HandleRequests.php",true);
	request.setRequestHeader("Content-Type","application/x-www-form-urlencoded");
	request.onreadystatechange = function ()
	{
		if ((this.readyState == 4)&&(this.status == 200))
		{
			HandleLoginResponse(this.responseText);
		}
	}
	request.send(message);
	//request.send("type=login&username="+username+"&password="+password);
}
function HandleLoginResponse(response){
	var text;
      response = response.replace(/\s/g, "");
      switch (response) {
        case "nice":
          window.location.replace("cars.html");
          break;
        case "notnice":
          text = "Incorrect credentials";
          document.getElementById("loginFormError").innerHTML = text;
          break;
	//var text = JSON.parse(response);
	//if (obj["status"] == true){
	//	alert("Correct Username and Password!");
	}
	//else
	//	alert("incorrect username or password");
}
function registerPage(){
	window.location.href='Register.html';
	
}
</script>
	</body>
</html>
